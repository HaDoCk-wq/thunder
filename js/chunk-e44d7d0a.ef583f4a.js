(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e44d7d0a"],{"3fc4":function(e,t,s){"use strict";s("b518")},b518:function(e,t,s){},cc37:function(e,t,s){"use strict";s.r(t);s("b0c0");var i=s("7a23"),a=Object(i["G"])("data-v-6f7db287");Object(i["u"])("data-v-6f7db287");var c={class:"h-100 w-100"},n={class:"w-100 h-100 d-flex",style:{"flex-direction":"column",overflow:"auto"}},o={class:"me-4"},r={class:"mt-2 title-name"},l=Object(i["i"])("br",null,null,-1),u=Object(i["i"])("div",{class:"flex-fill"},null,-1),d={class:"p-2"},m=Object(i["i"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",fill:"currentColor",class:"bi bi-telephone-fill",viewBox:"0 0 16 16"},[Object(i["i"])("path",{"fill-rule":"evenodd",d:"M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z"})],-1),h={class:"d-flex p-2 h-100 chat-wrapper flex-fill",style:{"flex-direction":"column",overflow:"auto"}},p={class:"d-flex"},f={class:"text-break",style:{"white-space":"pre-wrap"}},b={class:"mb-1 d-flex"},g={class:"me-3"},j={class:"text-muted mt-0",style:{"font-size":"15px"}},O={class:"mt-1"},v={ref:"afterChat"},w={key:0,class:"progress-line border-progress-line"},$={class:"w-100 wrapper-input"},x=Object(i["i"])("button",{type:"submit",class:"btn btn-primary"},"Send",-1);Object(i["s"])();var k=a((function(e,t,s,a,k,y){return Object(i["r"])(),Object(i["f"])("div",c,[Object(i["i"])("div",n,[Object(i["i"])("div",{class:["p-2 d-flex top-bar",e.$store.getters["inCall"]?"":"sticky-top"]},[Object(i["i"])("div",o,[Object(i["i"])("strong",r,Object(i["A"])(e.$store.getters["currentGroup"].name),1),l,Object(i["i"])("div",null,Object(i["A"])(e.$store.getters["currentGroup"].desc),1)]),u,Object(i["i"])("div",d,[Object(i["i"])("div",{class:"top-button",onClick:t[1]||(t[1]=function(t){e.$store.commit("userEnterCall"),e.$router.push("/channels/groups/call/"+e.$route.params.id)})},[m])])],2),Object(i["i"])("div",h,[(Object(i["r"])(!0),Object(i["f"])(i["a"],null,Object(i["x"])(e.mesages,(function(t,s){return Object(i["r"])(),Object(i["f"])("div",{key:s,class:"p-2 message"},[Object(i["i"])("div",p,[Object(i["i"])("img",{src:e.$store.getters["api"]+"/profiles/"+t.sender.image,height:"50",width:"50",alt:"Profile image",class:"rounded-circle me-3"},null,8,["src"]),Object(i["i"])("div",f,[Object(i["i"])("div",b,[Object(i["i"])("div",g,[Object(i["i"])("strong",null,Object(i["A"])(t.sender.name),1)]),Object(i["i"])("div",j,Object(i["A"])(y.formatMessageData(t.timestamp)),1)]),Object(i["i"])("div",O,Object(i["A"])(t.content),1)])])])})),128)),Object(i["i"])("div",v,null,512)]),e.loading?(Object(i["r"])(),Object(i["f"])("div",w)):Object(i["g"])("",!0),Object(i["i"])("div",$,[Object(i["i"])("form",{onSubmit:t[3]||(t[3]=Object(i["F"])((function(){return y.emit&&y.emit.apply(y,arguments)}),["prevent"])),class:"d-flex flex-wrap"},[Object(i["E"])(Object(i["i"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.message=t}),type:"text",class:"me-2 flex-fill input-mesage",maxlength:"1000",placeholder:" Chat with "+e.currentChannel.name},null,8,["placeholder"]),[[i["C"],e.message]]),x],32)])])])})),y=s("c1df"),C=s.n(y),A={data:function(){return{message:"",mesages:[],loading:!1,currentChannel:{},streams:{},newStream:null,typing:0,peervue:null,peers:{}}},sockets:{connect:function(){console.log("socket connected")},newMessage:function(e){console.log("el server diu",e),this.mesages.push(e)}},methods:{emit:function(){""!=this.message&&(this.$socket.emit("message",this.$route.params.id,this.message,this.$store.getters["user"]),this.axios.post(this.$store.getters["api"]+"/messages/add/"+this.$route.params.id,{message:this.message},{headers:{authorization:"Bearer ".concat(window.localStorage.token)}}).then((function(e){console.warn("message enviat",e)})).catch((function(e){console.error(e)})).then((function(){})),this.message="")},populateMessages:function(){var e=this;"main"!=this.$route.params.id&&this.axios.get(this.$store.getters["api"]+"/messages/all/"+this.$route.params.id,{headers:{Authorization:"Bearer ".concat(window.localStorage.token)}}).then((function(t){console.warn("messages",t),e.mesages=t.data.messages})).catch((function(e){console.error(e)})).then((function(){console.log("Populate messages "),e.$refs.afterChat.scrollIntoView()}))},formatMessageData:function(e){return C()(e).startOf("minute").fromNow()},showTyping:function(){var e=this;this.typing++,setTimeout((function(){return e.typing--}),500)},peer:function(){this.$store.commit("navigateTo","groups"),this.$store.commit("refreshUser"),this.populateMessages(),this.$socket.emit("join-room",this.$route.params.id)}},mounted:function(){this.peer()},updated:function(){"main"!=this.$route.params.id&&this.$refs.afterChat.scrollIntoView({behavior:"smooth"})},created:function(){},computed:{chatId:function(){return this.$route.params.id}},watch:{chatId:function(e){this.$socket.emit("leave-room",e),this.peer()}}};s("3fc4");A.render=k,A.__scopeId="data-v-6f7db287";t["default"]=A}}]);
//# sourceMappingURL=chunk-e44d7d0a.ef583f4a.js.map