(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b68110d8"],{"22bb":function(e,t,o){},"2beb":function(e,t,o){"use strict";o("22bb")},"748c":function(e,t,o){"use strict";o.r(t);var c=o("7a23"),s=Object(c["G"])("data-v-71c4a66d");Object(c["u"])("data-v-71c4a66d");var n={class:"h-100 w-100"},l={class:"main-call h-100 w-100 video-grid",id:"Dish",style:{overflow:"auto"}},i={class:"wrapper-input p-1 d-flex fixed-bottom call-bar",style:{"flex-direction":"row !important"}},r=Object(c["i"])("div",{class:"flex-fill"},null,-1),a=Object(c["i"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor",class:"bi bi-mic-mute-fill",viewBox:"0 0 16 16"},[Object(c["i"])("path",{d:"M13 8c0 .564-.094 1.107-.266 1.613l-.814-.814A4.02 4.02 0 0 0 12 8V7a.5.5 0 0 1 1 0v1zm-5 4c.818 0 1.578-.245 2.212-.667l.718.719a4.973 4.973 0 0 1-2.43.923V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 1 0v1a4 4 0 0 0 4 4zm3-9v4.879L5.158 2.037A3.001 3.001 0 0 1 11 3z"}),Object(c["i"])("path",{d:"M9.486 10.607 5 6.12V8a3 3 0 0 0 4.486 2.607zm-7.84-9.253 12 12 .708-.708-12-12-.708.708z"})],-1),u=Object(c["i"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor",class:"bi bi-mic-fill",viewBox:"0 0 16 16"},[Object(c["i"])("path",{d:"M5 3a3 3 0 0 1 6 0v5a3 3 0 0 1-6 0V3z"}),Object(c["i"])("path",{d:"M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5z"})],-1),d=Object(c["i"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor",class:"bi bi-telephone-x-fill",viewBox:"0 0 16 16"},[Object(c["i"])("path",{"fill-rule":"evenodd",d:"M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511zm9.261 1.135a.5.5 0 0 1 .708 0L13 2.793l1.146-1.147a.5.5 0 0 1 .708.708L13.707 3.5l1.147 1.146a.5.5 0 0 1-.708.708L13 4.207l-1.146 1.147a.5.5 0 0 1-.708-.708L12.293 3.5l-1.147-1.146a.5.5 0 0 1 0-.708z"})],-1),m=Object(c["i"])("div",{class:"flex-fill"},null,-1),b=Object(c["i"])("div",{class:"flex-fill"},null,-1);Object(c["s"])();var h=s((function(e,t,o,s,h,f){return Object(c["r"])(),Object(c["f"])("div",n,[Object(c["i"])("div",l,[(Object(c["r"])(!0),Object(c["f"])(c["a"],null,Object(c["x"])(e.streams,(function(e,t){return Object(c["r"])(),Object(c["f"])("div",{key:t},[Object(c["i"])("video",{srcObject:e,autoplay:"",class:"video",muted:"own"==t},null,8,["srcObject","muted"])])})),128))]),Object(c["i"])("div",i,[r,e.$store.getters["micMuted"]?(Object(c["r"])(),Object(c["f"])("div",{key:0,class:"rounded-circle me-5 microphone microphone-muted",onClick:t[1]||(t[1]=function(t){return e.$store.commit("toggleMicMuted")})},[a])):(Object(c["r"])(),Object(c["f"])("div",{key:1,class:"rounded-circle me-5 microphone",onClick:t[2]||(t[2]=function(t){return e.$store.commit("toggleMicMuted")})},[u])),Object(c["i"])("div",{class:"rounded-circle penjar",onClick:t[3]||(t[3]=function(t){return e.$router.push("/channels/chat/main")})},[d,m]),b])])})),f=o("a0bc"),p=o.n(f),g={data:function(){return{message:"",mesages:[],loading:!1,chattingUser:{image:"default.png"},streams:{},newStream:null,typing:0,peervue:null,peers:{},userId:null,tempPeer:null,counter:0,tempStream:null}},sockets:{connect:function(){console.log("socket connected")},newMessage:function(e){console.log("el server diu",e),this.mesages.push(e)},writing:function(e){console.log(e),e!=this.$store.getters["user"]._id&&this.showTyping()}},methods:{peer:function(){var e=this;"main"!=this.chatId&&(this.streams={},navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(t){e.streams["own"]=t,e.newStream=t;var o=new p.a(e.$store.getters["user"]._id,e.$store.getters["peerObject"]);e.tempPeer=o,console.log("Peer:",o,e.$peer),o.on("call",(function(o){o.answer(t);var c=e.counter;o.on("stream",(function(t){console.log("stream"),e.streams[c]=t,e.counter++})),o.on("stream",(function(t){console.log("stream"),e.streams[c]=t}))})),e.sockets.subscribe("user-conected",(function(c){console.log("user conected",c);var s=o.call(c,t);s.on("stream",(function(t){console.log("stream"),e.streams[c]=t,console.log("moooolt stream")})),s.on("close",(function(){console.log("closed"),delete e.streams[c]})),e.peers[c]=s})),e.sockets.subscribe("user-disconnected",(function(t){console.log("disconected"),location.reload(),e.peers[t]&&e.peers[t].close(),delete e.streams[t]})),e.sockets.subscribe("leaved-call",(function(t){console.log("disconected"),e.peers[t]&&e.peers[t].close(),delete e.streams[t],location.reload()})),o.on("open",(function(t){console.log("open peer"),e.$socket.emit("join-call","call"+e.$route.params.id,t),e.userId=t,console.log("peer id",t)}))})))}},mounted:function(){this.peer()},beforeUnmount:function(){this.$socket.emit("leave-call","call"+this.$route.params.id,this.userId),location.reload()},updated:function(){},created:function(){},computed:{chatId:function(){return this.$store.getters["lastChatId"]}},watch:{chatId:function(e,t){this.peer(),console.log(e,t)}}};o("2beb");g.render=h,g.__scopeId="data-v-71c4a66d";t["default"]=g}}]);
//# sourceMappingURL=chunk-b68110d8.02597b06.js.map