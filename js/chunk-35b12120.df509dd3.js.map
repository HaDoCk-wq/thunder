{"version":3,"sources":["webpack:///./src/views/chat.vue?60a1","webpack:///./src/views/chat.vue","webpack:///./src/views/chat.vue?7373"],"names":["class","style","xmlns","width","height","fill","viewBox","fill-rule","d","ref","type","$route","params","id","$store","getters","channels","channel","i","key","src","alt","user","name","desc","$router","push","chattingUser","typing","mesages","mesage","sender","formatMessageData","timestamp","content","loading","emit","message","maxlength","placeholder","data","image","streams","newStream","peervue","peers","sockets","connect","console","log","newMessage","this","writing","_id","showTyping","methods","$socket","axios","post","headers","authorization","window","localStorage","token","then","response","catch","error","populateMessages","chatId","get","Authorization","userToChat","messages","$refs","afterChat","scrollIntoView","currentDate","startOf","fromNow","setTimeout","peer","commit","mounted","updated","behavior","created","computed","watch","newUser","oldUser","render","__scopeId"],"mappings":"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","file":"js/chunk-35b12120.df509dd3.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./chat.vue?vue&type=style&index=0&id=44736ffc&scoped=true&lang=css\"","<template>\n    <div class=\"h-100 w-100\">\n        <div class=\"h-100 w-100 container\" v-if=\"$route.params.id == 'main'\">\n            <br />\n            <h1 v-if=\"$store.getters['user'].channels != 0\" class=\"ms-3 mb-4\">\n                Select a friend to chat\n            </h1>\n            <div\n                v-for=\"(channel, i) in $store.getters['user'].channels\"\n                v-bind:key=\"i\"\n                class=\"user-card p-2 pb-0 d-flex\"\n                @click=\"\n                    $router.push('/channels/chat/' + channel.channel);\n                    $store.commit('setChatId', channel.channel);\n                \"\n            >\n                <img\n                    :src=\"\n                        $store.getters['api'] +\n                        '/profiles/' +\n                        channel.user.image\n                    \"\n                    height=\"55\"\n                    width=\"55\"\n                    alt=\"User image\"\n                    class=\"me-4 rounded-circle\"\n                />\n                <div class=\"pt-1\">\n                    <strong> {{ channel.user.name }} </strong>\n                    <p>{{ channel.user.desc }}</p>\n                </div>\n            </div>\n            <div v-if=\"$store.getters['user'].channels == 0\">\n                <h1 class=\"ms-3 mb-4\">Add friends to chat</h1>\n                <button\n                    class=\"ms-3 btn btn-primary\"\n                    @click=\"$router.push('/channels/friends')\"\n                >\n                    Search friends\n                </button>\n            </div>\n        </div>\n        <div\n            v-else\n            class=\"w-100 h-100 d-flex\"\n            style=\"flex-direction: column; overflow: auto\"\n        >\n            <div\n                class=\"p-2 d-flex top-bar\"\n                :class=\"!$store.getters['inCall'] ? 'sticky-top' : ''\"\n            >\n                <img\n                    :src=\"\n                        $store.getters['api'] +\n                        '/profiles/' +\n                        chattingUser.image\n                    \"\n                    alt=\"\"\n                    width=\"60\"\n                    height=\"60\"\n                    class=\"me-3 rounded-circle\"\n                />\n                <div class=\"me-4\">\n                    <strong class=\"mt-2 title-name\">\n                        {{ chattingUser.name }}\n                    </strong>\n                    <br />\n                    <div v-if=\"typing > 0\">typing...</div>\n                    <div v-else>\n                        {{ chattingUser.desc }}\n                    </div>\n                </div>\n\n                <div class=\"flex-fill\"></div>\n                <div class=\"p-2\">\n                    <div\n                        class=\"top-button\"\n                        @click=\"\n                            $socket.emit(\n                                'call',\n                                chattingUser._id,\n                                $route.params.id,\n                                $store.getters['user'].image,\n                                $store.getters['user'].name\n                            );\n                            $store.commit('userEnterCall');\n                            $router.push('/channels/call/' + $route.params.id);\n                        \"\n                    >\n                        <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            width=\"22\"\n                            height=\"22\"\n                            fill=\"currentColor\"\n                            class=\"bi bi-telephone-fill\"\n                            viewBox=\"0 0 16 16\"\n                        >\n                            <path\n                                fill-rule=\"evenodd\"\n                                d=\"M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z\"\n                            />\n                        </svg>\n                    </div>\n                </div>\n            </div>\n            <div\n                class=\"d-flex p-2 h-100 chat-wrapper flex-fill\"\n                style=\"flex-direction: column; overflow: auto\"\n            >\n                <div\n                    v-for=\"(mesage, i) in mesages\"\n                    :key=\"i\"\n                    class=\"p-2 message\"\n                >\n                    <div class=\"d-flex\">\n                        <img\n                            :src=\"\n                                $store.getters['api'] +\n                                '/profiles/' +\n                                mesage.sender.image\n                            \"\n                            height=\"50\"\n                            width=\"50\"\n                            alt=\"Profile image\"\n                            class=\"rounded-circle me-3\"\n                        />\n                        <div class=\"text-break\" style=\"white-space: pre-wrap\">\n                            <div class=\"mb-1 d-flex\">\n                                <div class=\"me-3\">\n                                    <strong>{{ mesage.sender.name }}</strong>\n                                </div>\n                                <div\n                                    class=\"text-muted mt-0\"\n                                    style=\"font-size: 15px\"\n                                >\n                                    {{ formatMessageData(mesage.timestamp) }}\n                                </div>\n                            </div>\n                            <div class=\"mt-1\">\n                                {{ mesage.content }}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div ref=\"afterChat\"></div>\n            </div>\n            <div\n                v-if=\"loading\"\n                class=\"progress-line border-progress-line\"\n            ></div>\n            <div class=\"w-100 wrapper-input\">\n                <form @submit.prevent=\"emit\" class=\"d-flex flex-wrap\">\n                    <input\n                        v-model=\"message\"\n                        type=\"text\"\n                        class=\"me-2 flex-fill input-mesage\"\n                        maxlength=\"1000\"\n                        :placeholder=\"' Chat with ' + chattingUser.name\"\n                        @keyup=\"\n                            $socket.emit(\n                                'write',\n                                'write' + chatId,\n                                $store.getters['user']._id\n                            )\n                        \"\n                    />\n                    <button type=\"submit\" class=\"btn btn-primary\">Send</button>\n                </form>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport moment from \"moment\";\n//import Peer from \"peerjs\";\n\nexport default {\n    data: function () {\n        return {\n            message: \"\",\n            mesages: [],\n            loading: false,\n            chattingUser: {\n                image: \"default.png\",\n            },\n            streams: {},\n            newStream: null,\n            typing: 0,\n            peervue: null,\n            peers: {},\n        };\n    },\n    sockets: {\n        connect: function () {\n            console.log(\"socket connected\");\n        },\n        newMessage: function (data) {\n            console.log(\"el server diu\", data);\n            this.mesages.push(data);\n        },\n        writing: function (data) {\n            console.log(data);\n            if (data != this.$store.getters[\"user\"]._id) {\n                this.showTyping();\n            }\n        },\n        // \"user-conected\": function(data) {\n        //   console.log(\"user conected\", data);\n        // },\n        // \"user-conected\": function(userId) {\n        //   const call = peer.call(userId, stream);\n        //   const video = document.createElement(\"video\");\n        //   call.on(\"stream\", (userVideoStream) => {\n        //     this.streams.push(userVideoStream);\n        //   });\n        //   call.on(\"close\", () => {\n        //     video.remove();\n        //   });\n\n        //   peers[userId] = call;\n\n        //   //   call.on(\"close\", (userVideoStream) => {\n        //   //     //this.streams = [];\n        //   //     // for (const stream of this.streams) {\n        //   //     //     if (stream.userId != userId) {\n        //   //     //         this.streams.push({\n        //   //     //             stream: userVideoStream,\n        //   //     //             id: userId,\n        //   //     //         });\n        //   //     //     }\n        //   //     // }\n        //   //     console.log(userVideoStream);\n        //   //   });\n        // },\n    },\n    methods: {\n        emit() {\n            if (this.message != \"\") {\n                this.$socket.emit(\n                    \"message\",\n                    this.$route.params.id,\n                    this.message,\n                    this.$store.getters[\"user\"]\n                );\n\n                this.axios\n                    .post(\n                        this.$store.getters[\"api\"] +\n                            \"/messages/add/\" +\n                            this.$route.params.id,\n                        {\n                            message: this.message,\n                        },\n                        {\n                            headers: {\n                                authorization: `Bearer ${window.localStorage.token}`,\n                            },\n                        }\n                    )\n                    .then((response) => {\n                        console.log(response);\n                    })\n                    .catch(function (error) {\n                        console.error(error);\n                    })\n                    .then(() => {});\n\n                this.message = \"\";\n            }\n        },\n        populateMessages() {\n            console.log(\"popu\");\n            if (this.chatId != \"main\") {\n                this.axios\n                    .get(\n                        this.$store.getters[\"api\"] +\n                            \"/messages/all/\" +\n                            this.chatId,\n                        {\n                            headers: {\n                                Authorization: `Bearer ${window.localStorage.token}`,\n                            },\n                        }\n                    )\n                    .then((response) => {\n                        console.log(response);\n                        this.chattingUser = response.data.userToChat;\n                        this.mesages = response.data.messages;\n                    })\n                    .catch(function (error) {\n                        console.error(error);\n                    })\n                    .then(() => {\n                        console.log(\"Populate messages \");\n                        //this.$refs.afterChat.scrollIntoView();\n                        this.$refs.afterChat.scrollIntoView();\n                    });\n            }\n        },\n        formatMessageData(currentDate) {\n            //return currentDate;\n            return moment(currentDate).startOf(\"minute\").fromNow();\n        },\n        showTyping() {\n            // now 'this' is referencing the Vue object and not the 'setTimeout' scope\n            this.typing++;\n            setTimeout(() => this.typing--, 500);\n        },\n        peer() {\n            this.$store.commit(\"navigateTo\", \"chat\");\n            //this.$store.commit(\"setNavbar\", false);\n            this.$store.commit(\"setChatId\", this.$route.params.id);\n            this.$store.commit(\"refreshUser\");\n            this.populateMessages();\n\n            this.$socket.emit(\"join-room\", this.$route.params.id);\n            this.$socket.emit(\n                \"listen-writing\",\n                \"write\" + this.$route.params.id\n            );\n\n            // if (this.chatId != \"main\") {\n            //     this.streams = {};\n            //     navigator.mediaDevices\n            //         .getUserMedia({\n            //             video: true,\n            //             //audio: true,\n            //         })\n            //         .then((stream) => {\n            //             this.streams[\"own\"] = stream;\n            //             this.newStream = stream;\n\n            //             var peer = new Peer(\n            //                 undefined,\n            //                 this.$store.getters[\"peerObject\"]\n            //             );\n\n            //             console.log(\"Peer:\", peer, this.$peer);\n\n            //             peer.on(\"call\", (call) => {\n            //                 call.answer(stream);\n            //                 call.on(\"stream\", (userVideoStream) => {\n            //                     console.log(\"stream\");\n            //                     this.streams[\"test\"] = userVideoStream;\n            //                 });\n            //             });\n\n            //             this.sockets.subscribe(\"user-conected\", (userId) => {\n            //                 console.log(\"user conected\", userId);\n\n            //                 const call = peer.call(userId, stream);\n            //                 // peer.call(userId, stream).on(\n            //                 //     \"stream\",\n            //                 //     (userVideoStream) => {\n            //                 //         console.log(\"stream\");\n            //                 //         this.streams[userId] = userVideoStream;\n            //                 //         console.log(\"moooolt stream\");\n            //                 //     }\n            //                 // );\n\n            //                 // peer.call(userId, stream).on(\"close\", () => {\n            //                 //     console.log(\"closed\");\n            //                 // });\n\n            //                 call.on(\"stream\", (userVideoStream) => {\n            //                     console.log(\"stream\");\n            //                     this.streams[userId] = userVideoStream;\n            //                     console.log(\"moooolt stream\");\n            //                 });\n\n            //                 call.on(\"close\", () => {\n            //                     console.log(\"closed\");\n            //                     //this.streams.delete(userId);\n            //                     delete this.streams[userId];\n            //                 });\n\n            //                 this.peers[userId] = call;\n            //             });\n\n            //             this.sockets.subscribe(\n            //                 \"user-disconnected\",\n            //                 (userId) => {\n            //                     console.log(\"disconected\");\n            //                     if (this.peers[userId])\n            //                         this.peers[userId].close();\n            //                 }\n            //             );\n\n            //             peer.on(\"open\", (id) => {\n            //                 console.log(\"open peer\");\n            //                 this.$socket.emit(\"join-call\", \"call\", id); //  + this.chatId\n            //             });\n            //         });\n            // }\n        },\n    },\n    mounted() {\n        this.peer();\n    },\n    updated() {\n        if (this.chatId != \"main\") {\n            this.$refs.afterChat.scrollIntoView({ behavior: \"smooth\" });\n        }\n    },\n    created() {},\n    computed: {\n        chatId() {\n            return this.$store.getters[\"lastChatId\"];\n            // Or return basket.getters.fruitsCount\n            // (depends on your design decisions).\n        },\n    },\n    watch: {\n        chatId(newUser, oldUser) {\n            this.populateMessages();\n            // Our fancy notification (2).\n            console.log(\"test\");\n            this.$socket.emit(\"leave-room\", oldUser);\n            this.$socket.emit(\"join-room\", this.chatId);\n\n            this.$socket.emit(\"leave-writing\", \"write\" + oldUser);\n            this.$socket.emit(\"listen-writing\", \"write\" + this.chatId);\n\n            //this.peer();\n\n            console.log(\"new user\", newUser, \"old user\", oldUser);\n        },\n    },\n};\n</script>\n\n<style scoped>\n.video-grid {\n    /* display: grid;\n    grid-template-columns: repeat(auto-fill, 520px);\n    grid-auto-rows: 400px; */\n\n    display: flex;\n    flex-wrap: wrap;\n    /* height: calc(100% - calc(var(--menu-nav-width) - 10px)); */\n    overflow: auto;\n    /* flex-flow: row;\n    flex-direction: row; */\n}\n\nvideo {\n    width: 300px;\n    height: 300px;\n    object-fit: cover;\n    border-radius: 10px;\n}\n\n.wrapper-input {\n    background-color: var(--light-dark-bg);\n    height: calc(var(--menu-nav-width) - 10px);\n    padding: 12px;\n}\n\n.input-mesage {\n    background-color: var(--light-bg);\n    border: 2px solid var(--dark-bg);\n    box-sizing: initial;\n    height: 32px;\n    color: white;\n}\n\n.input-mesage:focus {\n    border-bottom: 3px solid var(--bs-blue);\n    transition: border-bottom 0.1s;\n}\n\ntextarea:focus,\ninput:focus {\n    outline: none;\n}\n\n.user-card {\n    margin: 8px;\n    cursor: pointer;\n    border-radius: 4px;\n}\n\n.user-card:hover {\n    background-color: var(--light-dark-bg);\n}\n\n.title-name {\n    font-size: 20px;\n}\n\n.top-bar {\n    border-bottom: 2px solid var(--light-dark-bg);\n}\n\n.top-button {\n    padding: 10px;\n    padding-top: 7px;\n    border-radius: 4px;\n    cursor: pointer;\n}\n.top-button:hover {\n    background-color: var(--light-dark-bg);\n    color: var(--bs-green);\n    transition: all 0.3s;\n}\n\n.message {\n    /* border-bottom: 2px solid var(--light-dark-bg); */\n    margin-bottom: 10px;\n}\n\n.main-call {\n    z-index: 500;\n    background-color: var(--light-bg);\n}\n\n.microphone {\n    background-color: var(--light-bg);\n    width: calc(var(--menu-nav-width) - 10px);\n    padding: 12px;\n    padding-left: 15px;\n    cursor: pointer;\n}\n\n.microphone-muted {\n    color: var(--bs-red);\n}\n\n.penjar {\n    background-color: var(--bs-red);\n    width: calc(var(--menu-nav-width) - 10px);\n    padding: 12px;\n    padding-left: 13px;\n    cursor: pointer;\n}\n\n.call-bar {\n    z-index: 510;\n    margin-left: calc(var(--side-nav-width) + var(--menu-nav-width));\n    width: calc(100% - calc(var(--side-nav-width) + var(--menu-nav-width)));\n}\n\n@media (max-width: 926px) {\n    .call-bar {\n        margin-left: 0;\n        width: 100%;\n    }\n}\n</style>\n","import { render } from \"./chat.vue?vue&type=template&id=44736ffc&scoped=true\"\nimport script from \"./chat.vue?vue&type=script&lang=js\"\nexport * from \"./chat.vue?vue&type=script&lang=js\"\n\nimport \"./chat.vue?vue&type=style&index=0&id=44736ffc&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-44736ffc\"\n\nexport default script"],"sourceRoot":""}